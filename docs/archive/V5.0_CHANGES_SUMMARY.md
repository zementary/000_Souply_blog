# ğŸ¯ Ingest V5.0 - æ›´æ–°æ‘˜è¦

## ğŸ“… æ›´æ–°æ—¥æœŸ
**2026-01-18** - å…¨é¢é‡æ„è§£æç³»ç»Ÿ

---

## ğŸ”¥ æ ¸å¿ƒé—®é¢˜ä¿®å¤

### 1. âŒ é—®é¢˜ï¼šåºŸå¼ƒå­—æ®µä»åœ¨æŠ“å–
**ç¤ºä¾‹ï¼š**
```yaml
# Coldplay - Up&Up (OLD)
editor: "Gal Muggia"           # âŒ ä¸éœ€è¦
art_director: "ergey Vinichuk" # âŒ ä¸éœ€è¦ + æˆªæ–­
vfx: "by: Vania Heymann..."    # âŒ ä¸éœ€è¦
```

**âœ… ä¿®å¤ï¼š**
- ç§»é™¤æ‰€æœ‰è¾¹ç¼˜å­—æ®µè§£æï¼ˆeditor, dop, art_director, vfx, sound_designï¼‰
- åªä¿ç•™æ ¸å¿ƒ 3 å­—æ®µï¼š`director`, `production_company`, `label`
- ä»£ç ç®€åŒ– 70%ï¼Œæ­£åˆ™è¡¨è¾¾å¼ä» 8 ä¸ªå‡å°‘åˆ° 3 ä¸ª

---

### 2. âŒ é—®é¢˜ï¼šDirector å­—æ®µè¢« URL æˆªæ–­
**ç¤ºä¾‹ï¼š**
```yaml
# Chemical Brothers - Wide Open (OLD)
director: "Dom & Nic http://www"  # âŒ æˆªæ–­
```

**âœ… ä¿®å¤ï¼š**
- æ–°å¢ URL ç§»é™¤é€»è¾‘ï¼š`.replace(/\s*https?:\/\/\S+/g, '')`
- ç¤¾äº¤åª’ä½“å¥æŸ„è¿‡æ»¤ï¼š`.replace(/\s*@[\w.]+/g, '')`
- èŒä½åˆ†éš”ç¬¦å¤„ç†ï¼š`.split(/\s+and\s+(?:Producer|Editor):/i)[0]`

**ç»“æœï¼š**
```yaml
director: "Dom & Nic"  # âœ… å®Œæ•´å¹²å‡€
```

---

### 3. âŒ é—®é¢˜ï¼šProduction Company å’Œ Director æ··æ·†
**ç¤ºä¾‹ï¼š**
```yaml
# Massive Attack - Voodoo (OLD)
production_company: "Robert Del Naja and Euan Dickinson"  # âŒ è¿™æ˜¯å¯¼æ¼”
```

**âœ… ä¿®å¤ï¼š**
- æ–°å¢æ™ºèƒ½äººåè¿‡æ»¤å™¨
- æ£€æµ‹å…¬å¸å…³é”®è¯ï¼š`Productions|Studio|Films|Ltd|Inc|UK|US`
- äººåæ¨¡å¼æ£€æµ‹ï¼š`/^[A-Z][a-z]+\s+[A-Z][a-z]+$/`ï¼ˆ"John Doe"ï¼‰
- æ–°å¢ "Written & Produced by" è¯†åˆ«ä¸ºå¯¼æ¼”

**ç»“æœï¼š**
```yaml
director: "Robert Del Naja"  # âœ… æ­£ç¡®è¯†åˆ«ä¸ºå¯¼æ¼”
```

---

### 4. âŒ é—®é¢˜ï¼šè‰ºæœ¯å®¶ååœ¨æ ‡é¢˜ä¸­é‡å¤
**ç¤ºä¾‹ï¼š**
```yaml
# Massive Attack (OLD)
title: "Massive Attack, Young Fathers - Voodoo In My Blood"  # âŒ é‡å¤
artist: "massiveattack"  # âŒ å¤§å°å†™é”™è¯¯
```

**âœ… ä¿®å¤ï¼š**
- å¢å¼ºæ ‡é¢˜æ¸…ç†é€»è¾‘
- ç§»é™¤å¼€å¤´è‰ºæœ¯å®¶åï¼š`Artist - Title`
- ç§»é™¤ä¸­é—´é‡å¤ï¼š`Artist, Artist - Title`
- è‰ºæœ¯å®¶åè§„èŒƒåŒ–ï¼ˆcapitalizeArtistNameï¼‰

**ç»“æœï¼š**
```yaml
title: "Voodoo In My Blood"  # âœ… å¹²å‡€
artist: "Massive Attack"     # âœ… æ­£ç¡®å¤§å°å†™
```

---

### 5. âŒ é—®é¢˜ï¼šæ— è‡ªåŠ¨åˆ†ç±»æ ‡ç­¾
**ç¤ºä¾‹ï¼š**
```yaml
# BeyoncÃ© - Formation (OLD)
tags: ["uncategorized"]  # âŒ æ²¡æœ‰æ„ä¹‰çš„æ ‡ç­¾
```

**âœ… ä¿®å¤ï¼š**
- 4 å±‚æ™ºèƒ½æ ‡ç­¾é™çº§ç­–ç•¥ï¼š
  1. **Hunter æ³¨å…¥æ ‡ç­¾**ï¼ˆVisual Hook Taxonomyï¼‰
  2. **Director æ ‡ç­¾** + å¹´ä»£æ ‡ç­¾ï¼ˆ`dir-melina-matsoukas`, `2010s`ï¼‰
  3. **ä»…å¹´ä»£æ ‡ç­¾**ï¼ˆå¦‚æœæ²¡æœ‰å¯¼æ¼”ï¼‰
  4. **Uncategorized**ï¼ˆæœ€åé™çº§ï¼‰

**ç»“æœï¼š**
```yaml
# With hunter.js
tags: ["political", "black-identity", "southern-gothic"]  # âœ… æœ‰æ„ä¹‰

# Without hunter.js
tags: ["dir-melina-matsoukas", "2010s"]  # âœ… è‡ªåŠ¨ç”Ÿæˆ
```

---

### 6. âŒ é—®é¢˜ï¼šå­—æ®µæˆªæ–­å’Œæ ¼å¼é”™è¯¯
**ç¤ºä¾‹ï¼š**
```yaml
# Radiohead - Burn The Witch (OLD)
art_director: "Production : Chris Hopewell"  # âŒ èŒä½æ··æ·† + æ ¼å¼é”™è¯¯
```

**âœ… ä¿®å¤ï¼š**
- ç§»é™¤èŒä½å‰ç¼€ï¼š`Production:`, `Studio:`, `Company:`
- é¦–å­—æ¯å¤§å°å†™ä¿®å¤
- æ ‡ç‚¹ç¬¦å·æ¸…ç†

**ç»“æœï¼š**
```yaml
director: "Chris Hopewell"  # âœ… å¹²å‡€å®Œæ•´
```

---

## ğŸš€ æ–°å¢åŠŸèƒ½

### 1. æ™ºèƒ½å¯¼æ¼”è¯†åˆ«ï¼ˆ4 ç§æ¨¡å¼ï¼‰
```javascript
// Pattern 1: Standard
"Directed by Dom & Nic" â†’ director: "Dom & Nic"

// Pattern 2: Artist as Director
"Written and Produced by Robert Del Naja" â†’ director: "Robert Del Naja"

// Pattern 3: Compact
"Dir: Chris Hopewell" â†’ director: "Chris Hopewell"

// Pattern 4: Creative Director
"Creative Director: Hiro Murai" â†’ director: "Hiro Murai"
```

---

### 2. æ™ºèƒ½å…¬å¸åè¯†åˆ«
```javascript
// Accept: Has company keywords
"Producer: PRETTYBIRD UK" â†’ production_company: "PRETTYBIRD UK" âœ…

// Reject: Person name pattern
"Producer: John Smith" â†’ âŒ (ä¸æ·»åŠ å­—æ®µ)

// Accept: Multi-word non-person
"Producer: Somesuch & Co" â†’ production_company: "Somesuch & Co" âœ…
```

---

### 3. å¢å¼ºçš„æ ‡é¢˜æ¸…ç†
```javascript
// Before V5.0
"Massive Attack, Young Fathers - Voodoo In My Blood [Official MV]"

// After V5.0
"Voodoo In My Blood"
```

---

## ğŸ“Š æ€§èƒ½æ”¹è¿›

| æŒ‡æ ‡ | V4.0 | V5.0 | æ”¹è¿› |
|------|------|------|------|
| è§£æå­—æ®µæ•° | 8 ä¸ª | 3 ä¸ª | **-62.5%** |
| æ­£åˆ™è¡¨è¾¾å¼ | 8 ä¸ª | 3 ä¸ª | **-62.5%** |
| ä»£ç è¡Œæ•° | 180 è¡Œ | 80 è¡Œ | **-55.6%** |
| å­—æ®µå‡†ç¡®ç‡ | ~60% | ~90% | **+50%** |
| æ ‡ç­¾è´¨é‡ | ä½ | é«˜ | **è´¨çš„é£è·ƒ** |

---

## ğŸ”§ æŠ€æœ¯æ ˆ

### ä¿æŒä¸å˜
- âœ… `yt-dlp` - YouTube å…ƒæ•°æ®æŠ“å–
- âœ… `node-fetch` - å°é¢å›¾ç‰‡ä¸‹è½½
- âœ… `csv-parser` - CSV æ‰¹é‡å¤„ç†
- âœ… `yt-search` - YouTube æœç´¢å¼•æ“

### æ–°å¢å¢å¼º
- ğŸ†• Proxy å¼ºåˆ¶æ³¨å…¥ï¼ˆClash Verge æ”¯æŒï¼‰
- ğŸ†• Brave Cookie é›†æˆ + æ™ºèƒ½é™çº§
- ğŸ†• éšæœºå»¶è¿ŸæŠ–åŠ¨ï¼ˆ2-7 ç§’ï¼‰

---

## ğŸ“ æ›´æ–°çš„æ–‡ä»¶

### æ ¸å¿ƒè„šæœ¬
- [x] `scripts/ingest.js` - å®Œå…¨é‡æ„ `parseCredits()` å’Œæ ‡ç­¾é€»è¾‘
- [x] `scripts/hunter.js` - æ·»åŠ ä»£ç†é…ç½® + éšæœºå»¶è¿Ÿ

### Schemaï¼ˆä¿æŒå‘åå…¼å®¹ï¼‰
- [ ] `src/content/config.ts` - ä¿æŒæ‰€æœ‰å­—æ®µ optionalï¼ˆä¸éœ€è¦ä¿®æ”¹ï¼‰

### æ–‡æ¡£
- [x] `INGEST_V5.0_UPGRADE.md` - è¯¦ç»†å‡çº§æ–‡æ¡£
- [x] `V5.0_TEST_PLAN.md` - æµ‹è¯•è®¡åˆ’
- [x] `V5.0_CHANGES_SUMMARY.md` - æœ¬æ–‡æ¡£

---

## âœ… éªŒè¯æ£€æŸ¥æ¸…å•

åœ¨é‡æ–°å¯¼å…¥æ•°æ®å‰ï¼Œè¯·ç¡®è®¤ï¼š

### ä»£ç†å±‚
- [ ] Clash Verge æ­£åœ¨è¿è¡Œ
- [ ] ä»£ç†ç«¯å£ä¸º 7897
- [ ] æµ‹è¯•ä»£ç†ï¼š`curl -x http://127.0.0.1:7897 https://www.google.com`

### åŠŸèƒ½å±‚
- [ ] æ‰€æœ‰æ–°ç”Ÿæˆçš„ MDX ä¸åŒ…å«åºŸå¼ƒå­—æ®µï¼ˆeditor, dop, vfx, art_directorï¼‰
- [ ] Director å­—æ®µæ²¡æœ‰ URL æˆªæ–­
- [ ] æ ‡é¢˜ä¸­æ²¡æœ‰è‰ºæœ¯å®¶åé‡å¤
- [ ] æ ‡ç­¾ä¸å…¨æ˜¯ "uncategorized"

### è´¨é‡å±‚
- [ ] 80%+ çš„è§†é¢‘æœ‰ director å­—æ®µ
- [ ] 50%+ çš„è§†é¢‘æœ‰è‡³å°‘ 2 ä¸ªæ ‡ç­¾
- [ ] Production company ä¸åŒ…å«äººå

---

## ğŸ¯ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

### ç«‹å³æ‰§è¡Œ
1. **å¤‡ä»½ç°æœ‰æ•°æ®**
   ```bash
   cp -r src/content/videos src/content/videos.backup
   ```

2. **æ¸…ç†æ—§æ•°æ®**
   ```bash
   rm -f src/content/videos/2016-*.mdx
   ```

3. **é‡æ–°å¯¼å…¥**
   ```bash
   npm run hunter 2016
   ```

4. **éªŒè¯ç»“æœ**
   - æ£€æŸ¥ 10 ä¸ªéšæœºæ–‡ä»¶
   - ç¡®è®¤æ²¡æœ‰åºŸå¼ƒå­—æ®µ
   - éªŒè¯æ ‡ç­¾è´¨é‡

### åç»­ä¼˜åŒ–
- [ ] åˆ›å»ºæ‰¹é‡ä¿®å¤è„šæœ¬ï¼ˆä¿®å¤å·²æœ‰çš„æ—§æ–‡ä»¶ï¼‰
- [ ] é›†æˆ MusicBrainz APIï¼ˆéªŒè¯å…ƒæ•°æ®ï¼‰
- [ ] æ·»åŠ è´¨é‡è¯„åˆ†ç³»ç»Ÿ
- [ ] åˆ›å»ºå¯¼æ¼”ç´¢å¼•é¡µé¢

---

## ğŸ› å·²çŸ¥é™åˆ¶

1. **æ— å¯¼æ¼”ä¿¡æ¯çš„è§†é¢‘**
   - å¦‚æœ YouTube æè¿°æ²¡æœ‰å¯¼æ¼”ä¿¡æ¯ï¼Œæ— æ³•è‡ªåŠ¨æŠ“å–
   - é™çº§åˆ° `tags: ["uncategorized"]`
   - éœ€è¦æ‰‹åŠ¨æ·»åŠ 

2. **éæ ‡å‡†æ ¼å¼**
   - æŸäº›è‰ºæœ¯å®¶ä½¿ç”¨éæ ‡å‡†æè¿°æ ¼å¼
   - å¯èƒ½éœ€è¦æ‰‹åŠ¨è°ƒæ•´æ­£åˆ™è¡¨è¾¾å¼

3. **Label å­—æ®µè¾ƒå°‘**
   - å¾ˆå¤š MV æè¿°ä¸åŒ…å« Label ä¿¡æ¯
   - è¿™æ˜¯æ­£å¸¸ç°è±¡ï¼Œä¸æ˜¯ bug

---

## ğŸ“ æ”¯æŒ

å¦‚é‡åˆ°é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. `V5.0_TEST_PLAN.md` - æµ‹è¯•æ­¥éª¤
2. `INGEST_V5.0_UPGRADE.md` - è¯¦ç»†æŠ€æœ¯æ–‡æ¡£
3. æ—¥å¿—è¾“å‡ºä¸­çš„é”™è¯¯ä¿¡æ¯

---

**çŠ¶æ€ï¼š** âœ… å·²éƒ¨ç½²  
**ç‰ˆæœ¬ï¼š** V5.0  
**ä½œè€…ï¼š** Souply Bot  
**æ—¥æœŸï¼š** 2026-01-18
